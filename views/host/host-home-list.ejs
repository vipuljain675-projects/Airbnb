<%- include('../partials/head') %>
</head>
<body>
  <%- include('../partials/nav') %>
  <main class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4 border-bottom pb-3">
      <h1 class="text-primary fw-bold mb-0">Your Listings</h1>
      <a href="/host/add-home" class="btn btn-primary shadow-sm"><i class="bi bi-plus-circle me-2"></i> Add New Home</a>
    </div>
    <div class="row">
      <% if (homes.length > 0) { %>
        <% for (let home of homes) { %>
          <div class="col-md-4 mb-4">
            <div class="card h-100 shadow-sm">
              <div class="position-relative">
                <% const cover = Array.isArray(home.photoUrl) ? home.photoUrl[0] : home.photoUrl %>
                <img src="<%= cover %>" class="card-img-top" style="height: 200px; object-fit: cover;">
                <span class="position-absolute top-0 end-0 bg-dark text-white px-2 py-1 m-2 rounded opacity-75 small">‚≠ê <%= home.rating %></span>
              </div>
              <div class="card-body d-flex flex-column">
                <h5 class="card-title mb-0 fw-bold"><%= home.houseName %></h5>
                <p class="text-muted small mb-2"><i class="bi bi-geo-alt-fill"></i> <%= home.location %></p>
                <div class="mt-3 pt-3 border-top d-flex justify-content-between">
                  <a href="/host/edit-home/<%= home._id %>?editing=true" class="btn btn-outline-secondary btn-sm w-45">Edit</a>
                  <form action="/host/delete-home/<%= home._id %>" method="POST" class="w-45">
                    <button class="btn btn-outline-danger btn-sm w-100">Delete</button>
                  </form>
                </div>
              </div>
            </div>
          </div>
        <% } %>
      <% } else { %>
        <div class="text-center w-100 mt-5"><h3>No properties listed yet.</h3></div>
      <% } %>
    </div>
  </main>
</body>
</html>