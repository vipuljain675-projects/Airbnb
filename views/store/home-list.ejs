<!DOCTYPE html>
<html lang="en">
<%- include("../partials/head") %>
<body>
  <%- include("../partials/nav") %>
  
  <main>
    <% if (isSearch) { %>
        <h1 style="margin-bottom: 1.5rem;">Search Results</h1>
    <% } else { %>
        <h1 style="margin-bottom: 1.5rem;">Explore Homes</h1>
    <% } %>

    <% if (registeredHomes.length === 0) { %>
      
      <div class="centered-message">
        <% if (isSearch) { %>
            <h2>No matches found</h2>
            <p>We couldn't find any homes matching your search.</p>
            <a href="/homes" class="btn btn-outline">Clear Search</a>
        <% } else { %>
            <h2>No homes available yet!</h2>
            <p>Be the first to list your home.</p>
            <a href="/host/add-home" class="btn btn-primary">List your home</a>
        <% } %>
      </div>

    <% } else { %>
      
      <div class="home-grid">
        <% registeredHomes.forEach(home => { %>
          
          <div class="home-card">
            <a href="/homes/<%= home.id %>">
              <img src="<%= home.photoUrl %>" alt="<%= home.houseName %>">
            </a>

            <div class="home-info">
              <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                  <h3 style="margin: 0;"><%= home.location %></h3>
                  <span class="rating">★ <%= home.rating %></span>
              </div>
              
              <p style="color: #717171; margin: 4px 0;"><%= home.houseName %></p>
              
              <div style="margin-top: 6px;">
                  <span class="price">₹<%= home.price %></span> 
                  <span style="font-weight: 300;"> night</span>
              </div>

              <div class="card-actions">
                  <a href="/homes/<%= home.id %>" class="btn btn-outline" style="flex: 1; text-align: center;">Details</a>
                  
                  <form action="/favourites" method="POST" style="flex: 0;">
                      <input type="hidden" name="homeId" value="<%= home.id %>">
                      <button class="btn btn-outline" style="padding: 0.5rem 0.8rem; font-size: 1.2rem; line-height: 1; color: #ff385c; border-color: #ff385c;">♡</button>
                  </form>

                  <a href="/reserve/<%= home.id %>" class="btn btn-primary" style="flex: 1; text-align: center;">Book</a>
              </div>
            </div>
          </div>

        <% }) %>
      </div>

    <% } %>
  </main>
</body>
</html>